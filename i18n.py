# i18n.py
# Keep this file tiny and dependency-free.

TRANSLATIONS = {
    'en': {
        'metric_keys': {
            'landing_page_views': 'Landing Page Views',
            'total_conversations': 'Total Conversations'
        },
        'settings': '⚙️ Settings',
        'manage_profiles': 'Manage Credential Profiles',
        'add_profile': 'Add New Profile',
        'tab_overview': 'Overview',
        'tab_campaigns': 'Campaigns',
        'tab_ads': 'Ads',
        'tab_demographics': 'Demographics',
        'tab_devices': 'Devices & Platforms',
        'tab_custom_dashboard': 'Custom Dashboard',
        'profile_name': 'Profile Name',
        'app_id': 'App ID',
        'app_secret': 'App Secret',
        'access_token': 'Access Token',
        'ad_account': 'Ad Account ID (e.g., act_123456)',
        'save_profile': '💾 Save Profile',
        'delete_profile': '🗑️ Delete Profile',
        'select_profile': '📂 Select Profile',
        'date_range': 'Date Range',
        'load_data': 'Load Data',
        'metric_select': 'Select Metric',
        'metric_options': ['Landing Page Views', 'Total Conversations'],
        'lpv_by_day': 'Landing Page Views by Day',
        'lpv_by_campaign': 'Landing Page Views by Campaign',
        'date_label': 'Date',
        'lpv_label': 'Landing Page Views',
        'select_profile_prompt': "👈 Select a profile and date range, then click 'Load Data' to begin",
        'fetching_data': '📊 Fetching data from Facebook Ads Manager...',
        'data_loaded_success': '✅ Data loaded successfully!',
        'key_metrics': 'Key Performance Metrics',
        'total_spend': '💰 Total Spend',
        'total_clicks': '👆 Total Clicks',
        'landing_page_views': '🌐 Landing Page Views',
        'total_reach': '👁️ Total Reach',
        'total_conversations': '💬 Total Conversations',
        'total_impressions': '📊 Total Impressions',
        'avg_ctr': '📈 Avg CTR',
        'avg_cpc': '💵 Avg CPC',
        'daily_trends': 'Daily Performance Trends',
        'clicks_impressions_over_time': 'Clicks & Impressions Over Time',
        'performance_by_platform': 'Performance by Platform',
        'campaign_details': 'Campaign Performance Details',
        'ads_details': 'Ad Performance Details',
        'top_10_clicks': '🏆 Top 10 Ads by Clicks',
        'top_10_lpv': '🏆 Top 10 Ads by Landing Page Views',
        'top_10_conv': '🏆 Top 10 Ads by Conversations',
        'audience_demographics': 'Audience Demographics',
        'age_distribution': 'Age Distribution',
        'gender_distribution': 'Gender Distribution',
        'device_platform_analytics': 'Device & Platform Analytics',
        'device_breakdown': 'Device Breakdown',
        'platform_performance': 'Platform Performance',
        'no_campaign_data': 'No campaign data available for the selected date range.',
        'export_data': 'Export Data',
        'download_campaign': 'Download Campaign Data (CSV)',
        'download_ads': 'Download Ad Data (CSV)',
        'download_daily': 'Download Daily Data (CSV)',
        'getting_started': '🚀 Getting Started',
        'getting_started_title': 'How to Use This Dashboard',
        'getting_started_step1': 'Language',
        'getting_started_step1_details': 'choose en (English) or zh (中文).',
        'getting_started_step2': 'Date Range',
        'getting_started_step2_details': 'pick a start and end date for your analysis.',
        'getting_started_step3': 'Load Data',
        'getting_started_step3_details': 'click Load Data to fetch your ads data.',
        'getting_started_step4': 'Primary Metric',
        'getting_started_step4_details': 'defaults to Landing Page Views. Switch to Messaging Conversations to update all charts and totals.',
        'getting_started_creds_title': 'Need help?',
        'getting_started_creds_app': 'Contact Caden at hoeyinf1@yahoo.com for assistance.',
        'winners_tab': 'Winners vs Underperformers',
        'custom_tab_title': 'Build Your Own Dashboard',
        'custom_tab_description': 'Select the insights you care about and arrange them with drag & drop to create a personalised view.',
        'custom_tab_builder_title': 'Choose your tiles',
        'custom_tab_select_prompt': 'Select the cards to include',
        'custom_tab_empty': 'Pick at least one card to see the preview.',
        'custom_drag_instructions': 'Drag the cards in the list to reorder them. Your layout is saved automatically for this session.',
        'custom_daily_trend': 'Daily Trend Chart',
        'custom_campaign_summary': 'Campaign Summary',
        'custom_platform_breakdown': 'Platform Breakdown',
        'custom_top_ads': 'Top Ads',
        'custom_trend_metric_label': 'Metric to plot',
        'custom_tab_no_daily_data': 'Daily trend data is not available for this date range.',
        'custom_tab_no_platform_data': 'No platform data is available for the current filters.',
        'custom_tab_no_ads_data': 'No ads match the selected metric yet.',
        'custom_tab_preview_title': 'Dashboard preview',
        'min_impressions': 'Minimum Impressions',
        'min_clicks': 'Minimum Clicks',
        'filter_campaign': 'Filter by Campaign',
        'top_performers': '🏆 Top Performers',
        'needs_improve': '📊 Needs Improvement',
        'no_ads': 'No ad data available for the selected date range.',
        'no_match': 'No ads match the selected filters. Try adjusting the minimum thresholds.'
    },
    'zh': {
        'metric_keys': {
            'landing_page_views': '落地页浏览',
            'total_conversations': '会话总数'
        },
        'settings': '⚙️ 设置',
        'manage_profiles': '管理凭证配置',
        'add_profile': '添加新配置',
        'tab_overview': '概览',
        'tab_campaigns': '广告系列',
        'tab_ads': '广告',
        'tab_demographics': '人口统计',
        'tab_devices': '设备与平台',
        'tab_custom_dashboard': '自定义仪表板',
        'profile_name': '配置名称',
        'app_id': '应用 ID',
        'app_secret': '应用密钥',
        'access_token': '访问令牌',
        'ad_account': '广告账户 ID (例如: act_123456)',
        'save_profile': '💾 保存配置',
        'delete_profile': '🗑️ 删除配置',
        'select_profile': '📂 选择配置',
        'date_range': '日期范围',
        'load_data': '加载数据',
        'metric_select': '选择指标',
        'metric_options': ['落地页浏览', '会话总数'],
        'lpv_by_day': '每日落地页浏览',
        'lpv_by_campaign': '广告系列落地页浏览',
        'date_label': '日期',
        'lpv_label': '落地页浏览',
        'select_profile_prompt': '👈 选择配置和日期范围，然后点击 "加载数据" 开始',
        'fetching_data': '📊 正在从 Facebook 广告管理器获取数据...',
        'data_loaded_success': '✅ 数据加载成功！',
        'getting_started': '🚀 入门指南',
        'getting_started_title': '如何使用此仪表板',
        'getting_started_step1': '语言',
        'getting_started_step1_details': '选择 en英文 或 zh中文。',
        'getting_started_step2': '日期范围',
        'getting_started_step2_details': '选择分析的开始和结束日期。',
        'getting_started_step3': '载入数据',
        'getting_started_step3_details': '点击 加载数据 获取广告数据。',
        'getting_started_step4': '主要指标',
        'getting_started_step4_details': '默认显示 落地页浏览。可切换为 会话总数，图表与总计会即时更新。',
        # 'getting_started_step5': '加载数据',
        # 'getting_started_step5_details': '点击"加载数据"按钮获取广告数据',
        'getting_started_creds_title': '需要协助？',
        'getting_started_creds_app': '请联系 Caden：hoeyinf1@yahoo.com',
        # 'getting_started_creds_token': '访问令牌',
        # 'getting_started_creds_account': '广告账户 ID',
        # 'getting_started_creds_app_link': 'Facebook Developers',
        # 'getting_started_creds_token_link': 'Facebook Business Manager',
        # 'getting_started_creds_account_details': '在广告管理器 URL 中可以找到',
        'key_metrics': '关键绩效指标',
        'total_spend': '💰 广告总支出',
        'total_clicks': '👆 点击总数',
        'landing_page_views': '🌐 落地页浏览',
        'total_reach': '👁️ 覆盖人数',
        'total_conversations': '💬 会话总数',
        'total_impressions': '📊 展示总数',
        'avg_ctr': '📈 平均 CTR',
        'avg_cpc': '💵 平均 CPC',
        'daily_trends': '每日绩效趋势',
        'clicks_impressions_over_time': '点击与展示随时间的变化',
        'performance_by_platform': '各平台表现',
        'campaign_details': '广告系列表现详情',
        'ads_details': '广告表现详情',
        'top_10_clicks': '🏆 点击数前 10 的广告',
        'top_10_lpv': '🏆 落地页浏览前 10 的广告',
        'top_10_conv': '🏆 会话数前 10 的广告',
        'audience_demographics': '受众人群',
        'age_distribution': '年龄分布',
        'gender_distribution': '性别分布',
        'device_platform_analytics': '设备与平台分析',
        'device_breakdown': '设备分类',
        'platform_performance': '平台表现',
        'no_campaign_data': '所选日期范围内无广告系列数据。',
        'export_data': '导出数据',
        'download_campaign': '下载广告系列数据 (CSV)',
        'download_ads': '下载广告数据 (CSV)',
        'download_daily': '下载每日数据 (CSV)',
        'winners_tab': '优胜者 vs 表现欠佳',
        'custom_tab_title': '构建你的仪表板',
        'custom_tab_description': '选择关注的指标并通过拖放排列，打造个性化视图。',
        'custom_tab_builder_title': '选择要显示的模块',
        'custom_tab_select_prompt': '选择要加入仪表板的模块',
        'custom_tab_empty': '请至少选择一个模块以查看预览。',
        'custom_drag_instructions': '拖拽上方的模块即可调整顺序，布局会自动保存。',
        'custom_daily_trend': '每日趋势图',
        'custom_campaign_summary': '广告系列汇总',
        'custom_platform_breakdown': '平台对比',
        'custom_top_ads': '热门广告',
        'custom_trend_metric_label': '趋势图指标',
        'custom_tab_no_daily_data': '所选日期范围内没有可用的每日数据。',
        'custom_tab_no_platform_data': '暂无平台数据可显示。',
        'custom_tab_no_ads_data': '没有符合条件的广告数据。',
        'custom_tab_preview_title': '仪表板预览',
        'min_impressions': '最低展示次数',
        'min_clicks': '最低点击数',
        'filter_campaign': '按广告系列筛选',
        'top_performers': '🏆 表现最佳',
        'needs_improve': '📊 需改进',
        'no_ads': '所选日期范围内无广告数据。',
        'no_match': '没有广告符合所选筛选条件。请调整最低阈值。'
    }
}

def t(lang: str, key: str, default: str | None = None):
    """Basic key lookup with English fallback."""
    try:
        return TRANSLATIONS.get(lang, TRANSLATIONS['en']).get(key, default or key)
    except Exception:
        return default or key

def metric_keys(lang: str) -> dict:
    return TRANSLATIONS.get(lang, TRANSLATIONS['en']).get('metric_keys', {})
