# i18n.py
# Keep this file tiny and dependency-free.

TRANSLATIONS = {
    'en': {
        'metric_keys': {
            'landing_page_views': 'Landing Page Views',
            'total_conversations': 'Total Conversations',
            'spend': 'Spend',
            'clicks': 'Clicks',
            'impressions': 'Impressions',
            'reach': 'Reach',
            'ctr': 'CTR',
            'cpc': 'CPC'
        },
        'settings': '⚙️ Settings',
        'manage_profiles': 'Manage Credential Profiles',
        'add_profile': 'Add New Profile',
        'tab_overview': 'Overview',
        'tab_campaigns': 'Campaigns',
        'tab_ads': 'Ads',
        'tab_demographics': 'Demographics',
        'tab_devices': 'Devices & Platforms',
        'profile_name': 'Profile Name',
        'app_id': 'App ID',
        'app_secret': 'App Secret',
        'access_token': 'Access Token',
        'ad_account': 'Ad Account ID (e.g., act_123456)',
        'save_profile': '💾 Save Profile',
        'delete_profile': '🗑️ Delete Profile',
        'select_profile': '📂 Select Profile',
        'date_range': 'Date Range',
        'load_data': 'Load Data',
        'metric_select': 'Select Metric',
        'metric_options': ['Landing Page Views', 'Total Conversations', 'Spend', 'Clicks', 'Impressions', 'Reach', 'CTR', 'CPC'],
        'lpv_by_day': 'Landing Page Views by Day',
        'spend_by_day': 'Spend by Day',
        'clicks_by_day': 'Clicks by Day',
        'impressions_by_day': 'Impressions by Day',
        'reach_by_day': 'Reach by Day',
        'ctr_by_day': 'CTR by Day',
        'cpc_by_day': 'CPC by Day',
        'lpv_by_campaign': 'Landing Page Views by Campaign',
        'date_label': 'Date',
        'lpv_label': 'Landing Page Views',
        'select_profile_prompt': "👈 Select a profile and date range, then click 'Load Data' to begin",
        'fetching_data': '📊 Fetching data from Facebook Ads Manager...',
        'data_loaded_success': '✅ Data loaded successfully!',
        'key_metrics': 'Key Performance Metrics',
        'widget_kpi_description': 'Summaries of spend, reach, and conversations for quick alignment.',
        'widget_daily_description': 'Visualize day-by-day momentum for clicks, impressions, and your focus KPI.',
        'widget_platform_description': 'Identify which platforms and placements are delivering engagement.',
        'total_spend': '💰 Total Spend',
        'spend_label': 'Spend (RM)',
        'total_clicks': '👆 Total Clicks',
        'landing_page_views': '🌐 Landing Page Views',
        'total_reach': '👁️ Total Reach',
        'reach_label': 'Reach',
        'total_conversations': '💬 Total Conversations',
        'total_impressions': '📊 Total Impressions',
        'avg_ctr': '📈 Avg CTR',
        'ctr_label': 'CTR (%)',
        'avg_cpc': '💵 Avg CPC',
        'cpc_label': 'CPC (RM)',
        'primary_metric_badge': 'Primary metric',
        'daily_trends': 'Daily Performance Trends',
        'clicks_impressions_over_time': 'Clicks & Impressions Over Time',
        'performance_by_platform': 'Performance by Platform',
        'campaign_details': 'Campaign Performance Details',
        'ads_details': 'Ad Performance Details',
        'top_10_clicks': '🏆 Top 10 Ads by Clicks',
        'top_10_lpv': '🏆 Top 10 Ads by Landing Page Views',
        'top_10_conv': '🏆 Top 10 Ads by Conversations',
        'dashboard_layout': 'Dashboard Layout',
        'widget_picker_label': 'Choose the widgets you want to display',
        'widget_sort_instruction': 'Drag items to reorder how widgets appear in the overview.',
        'download_layout': 'Download layout (JSON)',
        'upload_layout': 'Upload layout (JSON)',
        'layout_import_success': 'Layout imported successfully!',
        'layout_import_error': 'Could not import layout. Please verify the file.',
        'use_global_metric': 'Use dashboard metric',
        'custom_metric_label': 'Metric preference',
        'audience_demographics': 'Audience Demographics',
        'age_distribution': 'Age Distribution',
        'gender_distribution': 'Gender Distribution',
        'device_platform_analytics': 'Device & Platform Analytics',
        'device_breakdown': 'Device Breakdown',
        'platform_performance': 'Platform Performance',
        'clicks_by_platform': 'Clicks by Platform',
        'impressions_by_platform': 'Impressions by Platform',
        'lpv_by_platform': 'Landing Page Views by Platform',
        'conversations_by_platform': 'Conversations by Platform',
        'spend_by_platform': 'Spend by Platform',
        'reach_by_platform': 'Reach by Platform',
        'ctr_by_platform': 'CTR by Platform',
        'cpc_by_platform': 'CPC by Platform',
        'platform_label': 'Platform',
        'clicks_label': 'Clicks',
        'impressions_label': 'Impressions',
        'no_platform_data': 'No platform distribution data available for this range.',
        'no_campaign_data': 'No campaign data available for the selected date range.',
        'export_data': 'Export Data',
        'download_campaign': 'Download Campaign Data (CSV)',
        'download_ads': 'Download Ad Data (CSV)',
        'download_daily': 'Download Daily Data (CSV)',
        'getting_started': '🚀 Getting Started',
        'getting_started_title': 'How to Use This Dashboard',
        'getting_started_step1': 'Language',
        'getting_started_step1_details': 'choose en (English) or zh (中文).',
        'getting_started_step2': 'Date Range',
        'getting_started_step2_details': 'pick a start and end date for your analysis.',
        'getting_started_step3': 'Load Data',
        'getting_started_step3_details': 'click Load Data to fetch your ads data.',
        'getting_started_step4': 'Primary Metric',
        'getting_started_step4_details': 'defaults to Landing Page Views. Switch to Messaging Conversations to update all charts and totals.',
        'getting_started_creds_title': 'Need help?',
        'getting_started_creds_app': 'Contact Caden at hoeyinf1@yahoo.com for assistance.',
        'winners_tab': 'Winners vs Underperformers',
        'min_impressions': 'Minimum Impressions',
        'min_clicks': 'Minimum Clicks',
        'filter_campaign': 'Filter by Campaign',
        'top_performers': '🏆 Top Performers',
        'needs_improve': '📊 Needs Improvement',
        'no_ads': 'No ad data available for the selected date range.',
        'no_match': 'No ads match the selected filters. Try adjusting the minimum thresholds.',
        'no_daily_data': 'No daily results available for this selection.',
        'conversations_by_day': 'Messaging Conversations Started by Day',
        'conversations_label': 'Conversations',
        'no_metric_daily_data': 'No data available for the selected metric.',
        'no_widgets_selected': 'Add widgets from the sidebar to design your overview.'
    },
    'zh': {
        'metric_keys': {
            'landing_page_views': '落地页浏览',
            'total_conversations': '会话总数',
            'spend': '花费',
            'clicks': '点击量',
            'impressions': '曝光量',
            'reach': '触达人数',
            'ctr': '点击率',
            'cpc': '每次点击成本'
        },
        'settings': '⚙️ 设置',
        'manage_profiles': '管理凭证配置',
        'add_profile': '添加新配置',
        'tab_overview': '概览',
        'tab_campaigns': '广告系列',
        'tab_ads': '广告',
        'tab_demographics': '人口统计',
        'tab_devices': '设备与平台',
        'profile_name': '配置名称',
        'app_id': '应用 ID',
        'app_secret': '应用密钥',
        'access_token': '访问令牌',
        'ad_account': '广告账户 ID (例如: act_123456)',
        'save_profile': '💾 保存配置',
        'delete_profile': '🗑️ 删除配置',
        'select_profile': '📂 选择配置',
        'date_range': '日期范围',
        'load_data': '加载数据',
        'metric_select': '选择指标',
        'metric_options': ['落地页浏览', '会话总数', '花费', '点击量', '曝光量', '触达人数', '点击率', '每次点击成本'],
        'lpv_by_day': '每日落地页浏览',
        'spend_by_day': '每日花费',
        'clicks_by_day': '每日点击量',
        'impressions_by_day': '每日展示量',
        'reach_by_day': '每日覆盖人数',
        'ctr_by_day': '每日点击率',
        'cpc_by_day': '每日每次点击成本',
        'lpv_by_campaign': '广告系列落地页浏览',
        'date_label': '日期',
        'lpv_label': '落地页浏览',
        'select_profile_prompt': '👈 选择配置和日期范围，然后点击 "加载数据" 开始',
        'fetching_data': '📊 正在从 Facebook 广告管理器获取数据...',
        'data_loaded_success': '✅ 数据加载成功！',
        'getting_started': '🚀 入门指南',
        'getting_started_title': '如何使用此仪表板',
        'getting_started_step1': '语言',
        'getting_started_step1_details': '选择 en英文 或 zh中文。',
        'getting_started_step2': '日期范围',
        'getting_started_step2_details': '选择分析的开始和结束日期。',
        'getting_started_step3': '载入数据',
        'getting_started_step3_details': '点击 加载数据 获取广告数据。',
        'getting_started_step4': '主要指标',
        'getting_started_step4_details': '默认显示 落地页浏览。可切换为 会话总数，图表与总计会即时更新。',
        # 'getting_started_step5': '加载数据',
        # 'getting_started_step5_details': '点击"加载数据"按钮获取广告数据',
        'getting_started_creds_title': '需要协助？',
        'getting_started_creds_app': '请联系 Caden：hoeyinf1@yahoo.com',
        # 'getting_started_creds_token': '访问令牌',
        # 'getting_started_creds_account': '广告账户 ID',
        # 'getting_started_creds_app_link': 'Facebook Developers',
        # 'getting_started_creds_token_link': 'Facebook Business Manager',
        # 'getting_started_creds_account_details': '在广告管理器 URL 中可以找到',
        'key_metrics': '关键绩效指标',
        'widget_kpi_description': '汇总所选周期的支出、覆盖与会话等关键指标。',
        'widget_daily_description': '查看点击、展示与主要指标的每日趋势变化。',
        'widget_platform_description': '了解各投放平台带来的互动表现。',
        'total_spend': '💰 广告总支出',
        'spend_label': '花费 (RM)',
        'total_clicks': '👆 点击总数',
        'landing_page_views': '🌐 落地页浏览',
        'total_reach': '👁️ 覆盖人数',
        'reach_label': '覆盖人数',
        'total_conversations': '💬 会话总数',
        'total_impressions': '📊 展示总数',
        'avg_ctr': '📈 平均 CTR',
        'ctr_label': '点击率 (%)',
        'avg_cpc': '💵 平均 CPC',
        'cpc_label': '每次点击成本 (RM)',
        'primary_metric_badge': '主指标',
        'daily_trends': '每日绩效趋势',
        'clicks_impressions_over_time': '点击与展示随时间的变化',
        'performance_by_platform': '各平台表现',
        'campaign_details': '广告系列表现详情',
        'ads_details': '广告表现详情',
        'top_10_clicks': '🏆 点击数前 10 的广告',
        'top_10_lpv': '🏆 落地页浏览前 10 的广告',
        'top_10_conv': '🏆 会话数前 10 的广告',
        'dashboard_layout': '仪表板布局',
        'widget_picker_label': '选择要显示的小组件',
        'widget_sort_instruction': '拖动下方项目以调整显示顺序。',
        'download_layout': '下载布局 (JSON)',
        'upload_layout': '上传布局 (JSON)',
        'layout_import_success': '布局已导入！',
        'layout_import_error': '无法导入布局，请检查文件内容。',
        'use_global_metric': '跟随全局指标',
        'custom_metric_label': '指标偏好',
        'audience_demographics': '受众人群',
        'age_distribution': '年龄分布',
        'gender_distribution': '性别分布',
        'device_platform_analytics': '设备与平台分析',
        'device_breakdown': '设备分类',
        'platform_performance': '平台表现',
        'clicks_by_platform': '各平台点击数',
        'impressions_by_platform': '各平台展示数',
        'lpv_by_platform': '各平台落地页浏览',
        'conversations_by_platform': '各平台会话数',
        'spend_by_platform': '各平台花费',
        'reach_by_platform': '各平台覆盖',
        'ctr_by_platform': '各平台点击率',
        'cpc_by_platform': '各平台每次点击成本',
        'platform_label': '平台',
        'clicks_label': '点击数',
        'impressions_label': '展示数',
        'no_platform_data': '暂无平台分布数据。',
        'no_campaign_data': '所选日期范围内无广告系列数据。',
        'export_data': '导出数据',
        'download_campaign': '下载广告系列数据 (CSV)',
        'download_ads': '下载广告数据 (CSV)',
        'download_daily': '下载每日数据 (CSV)',
        'winners_tab': '优胜者 vs 表现欠佳',
        'min_impressions': '最低展示次数',
        'min_clicks': '最低点击数',
        'filter_campaign': '按广告系列筛选',
        'top_performers': '🏆 表现最佳',
        'needs_improve': '📊 需改进',
        'no_ads': '所选日期范围内无广告数据。',
        'no_match': '没有广告符合所选筛选条件。请调整最低阈值。',
        'no_daily_data': '当前选择没有每日数据。',
        'conversations_by_day': '每日会话开启数',
        'conversations_label': '会话数',
        'no_metric_daily_data': '所选指标暂无可视化数据。',
        'no_widgets_selected': '请在侧栏添加要显示的小组件。'
    }
}

def t(lang: str, key: str, default: str | None = None):
    """Basic key lookup with English fallback."""
    try:
        return TRANSLATIONS.get(lang, TRANSLATIONS['en']).get(key, default or key)
    except Exception:
        return default or key

def metric_keys(lang: str) -> dict:
    return TRANSLATIONS.get(lang, TRANSLATIONS['en']).get('metric_keys', {})
